<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FinTrack - Settings</title>
  <link rel="stylesheet" href="dashboard-styles.css">
  <script src="data-manager.js"></script>
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
      <div class="logo">
        <h2>FinTrack</h2>
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li>
            <a href="dashboard.html">Overview</a>
          </li>
          <li>
            <a href="transactions.html">Transactions</a>
          </li>
          <li>
            <a href="budgets.html">Budgets</a>
          </li>
          <li>
            <a href="goals.html">Goals</a>
          </li>
          <li>
            <a href="reports.html">Reports</a>
          </li>
          <li class="active">
            <a href="settings.html">Settings</a>
          </li>
        </ul>
      </nav>
      <div class="user-info">
        <div class="user-avatar" onclick="window.location.href='profile.html'">
          <img src="/placeholder.svg?height=40&width=40" alt="User Avatar" id="user-avatar-small">
        </div>
        <div class="user-details">
          <p class="user-name" id="user-name-sidebar"></p>
          <a href="index.html" class="logout-link">Logout</a>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Top Navigation -->
      <header class="top-nav">
        <div class="mobile-toggle" onclick="toggleSidebar()">
          <span>â˜°</span>
        </div>
        <div class="search-bar">
          <input type="text" placeholder="Search settings...">
        </div>
        <div class="top-nav-actions">
          <a href="notifications.html" class="btn-icon">
            <span class="notification-icon">ðŸ””</span>
            <span class="notification-badge" id="notification-count"></span>
          </a>
          <a href="profile.html" class="btn-icon">
            <span class="profile-icon">ðŸ‘¤</span>
          </a>
        </div>
      </header>

      <!-- Settings Content -->
      <div class="dashboard-content">
        <h1>Account Settings</h1>
        
        <div class="settings-container">
          <div class="settings-section">
            <h2>Profile Information</h2>
            <form id="profileForm" onsubmit="saveProfileSettings(event)">
              <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name">
              </div>
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email">
              </div>
              <div class="form-group">
                <label for="phone">Phone</label>
                <input type="tel" id="phone">
              </div>
              <button type="submit" class="save-btn">Save Changes</button>
            </form>
          </div>
          
          <div class="settings-section">
            <h2>Password</h2>
            <form id="passwordForm" onsubmit="changePassword(event)">
              <div class="form-group">
                <label for="current-password">Current Password</label>
                <input type="password" id="current-password" required>
              </div>
              <div class="form-group">
                <label for="new-password">New Password</label>
                <input type="password" id="new-password" required>
              </div>
              <div class="form-group">
                <label for="confirm-password">Confirm New Password</label>
                <input type="password" id="confirm-password" required>
              </div>
              <button type="submit" class="save-btn">Change Password</button>
            </form>
          </div>
          
          <div class="settings-section">
            <h2>Preferences</h2>
            <form id="preferencesForm" onsubmit="savePreferences(event)">
              <div class="form-group">
                <label for="currency">Currency</label>
                <select id="currency">
                  <option value="USD">USD ($)</option>
                  <option value="EUR">EUR (â‚¬)</option>
                  <option value="GBP">GBP (Â£)</option>
                  <option value="JPY">JPY (Â¥)</option>
                </select>
              </div>
              <div class="form-group">
                <label for="theme">Theme</label>
                <select id="theme">
                  <option value="light">Light</option>
                  <option value="dark">Dark</option>
                  <option value="system">System Default</option>
                </select>
              </div>
              <div class="form-group checkbox">
                <input type="checkbox" id="notifications">
                <label for="notifications">Enable Email Notifications</label>
              </div>
              <button type="submit" class="save-btn">Save Preferences</button>
            </form>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Load user data
    function loadUserData() {
      const user = DataManager.getUser();
      document.getElementById('user-name-sidebar').textContent = user.name;
      document.getElementById('user-avatar-small').src = user.avatar;
      
      // Fill profile form
      document.getElementById('name').value = user.name;
      document.getElementById('email').value = user.email;
      document.getElementById('phone').value = user.phone;
    }

    // Load preferences
    function loadPreferences() {
      const preferences = DataManager.getPreferences();
      
      document.getElementById('currency').value = preferences.currency;
      document.getElementById('theme').value = preferences.theme;
      document.getElementById('notifications').checked = preferences.notifications;
    }

    // Save profile settings
    function saveProfileSettings(event) {
      event.preventDefault();
      
      const user = DataManager.getUser();
      
      user.name = document.getElementById('name').value;
      user.email = document.getElementById('email').value;
      user.phone = document.getElementById('phone').value;
      
      DataManager.updateUser(user);
      
      alert('Profile settings saved successfully!');
    }

    // Change password
    function changePassword(event) {
      event.preventDefault();
      
      const currentPassword = document.getElementById('current-password').value;
      const newPassword = document.getElementById('new-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      
      if (newPassword !== confirmPassword) {
        alert('New passwords do not match!');
        return;
      }
      
      // In a real app, you would validate the current password and update the password
      
      // Reset form
      document.getElementById('passwordForm').reset();
      
      alert('Password changed successfully!');
    }

    // Save preferences
    function savePreferences(event) {
      event.preventDefault();
      
      const preferences = {
        currency: document.getElementById('currency').value,
        theme: document.getElementById('theme').value,
        notifications: document.getElementById('notifications').checked
      };
      
      DataManager.updatePreferences(preferences);
      
      // Apply theme if changed
      applyTheme(preferences.theme);
      
      alert('Preferences saved successfully!');
    }

    // Apply theme
    function applyTheme(theme) {
      // In a real app, you would apply the theme to the entire application
      // For this demo, we'll just log it
      console.log('Theme changed to:', theme);
    }

    // Load notification count
    function loadNotificationCount() {
      const notifications = DataManager.getNotifications();
      const unreadCount = notifications.filter(n => !n.read).length;
      
      const notificationCountElement = document.getElementById('notification-count');
      
      if (unreadCount > 0) {
        notificationCountElement.textContent = unreadCount;
        notificationCountElement.style.display = 'flex';
      } else {
        notificationCountElement.style.display = 'none';
      }
    }

    // Toggle sidebar on mobile
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      loadUserData();
      loadPreferences();
      loadNotificationCount();
    });
  </script>
</body>
</html>

